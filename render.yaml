# Render Blueprint Specification
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: chasm-api
    runtime: docker
    plan: standard  # 2 GB RAM â€” required for SentenceTransformer model
    region: oregon
    dockerfilePath: ./Dockerfile
    healthCheckPath: /api/health
    envVars:
      - key: GOOGLE_API_KEY
        sync: false  # Set manually in Render dashboard
      - key: REDDIT_CLIENT_ID
        sync: false
      - key: REDDIT_CLIENT_SECRET
        sync: false
      - key: REDDIT_USER_AGENT
        value: chasm_proto
      - key: CHASM_DATA_DIR
        value: /app/data
      - key: CORS_ORIGINS
        sync: false  # Set to your Vercel URL, e.g. https://chasm-ui.vercel.app
    disk:
      name: chasm-data
      mountPath: /app/data
      sizeGB: 1  # Persistent storage for export.json and scraped files
